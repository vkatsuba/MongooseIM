{config,default_server_domain,<<"localhost">>}.
{config,hosts,[<<"localhost">>,<<"dummy_host">>]}.
{local_config,
    {modules,<<"dummy_host">>},
    [{mod_jingle_sip,
         [{listen_port,5600},
          {local_host,"localhost"},
          {proxy_host,"localhost"},
          {proxy_port,5600},
          {sdp_origin,"127.0.0.1"}]},
     {mod_shared_roster_ldap,
         [{ldap_base,"ou=Users,dc=ejd,dc=com"},
          {ldap_filter,"(objectClass=inetOrgPerson)"},
          {ldap_group_cache_validity,1},
          {ldap_groupattr,"ou"},
          {ldap_memberattr,"cn"},
          {ldap_rfilter,"(objectClass=inetOrgPerson)"},
          {ldap_user_cache_validity,1},
          {ldap_userdesc,"cn"}]},
     {mod_mam_rdbms_user,[muc,pm]},
     {mod_global_distrib,
         [{bounce,[{max_retries,3},{resend_after_ms,300}]},
          {cache,[{domain_lifetime_seconds,60}]},
          {connections,
              [{advertised_endpoints,[{"172.16.0.2",5555}]},
               {connections_per_endpoint,30},
               {endpoints,[{"172.16.0.2",5555}]},
               {tls_opts,[{cafile,"priv/ca.pem"},{certfile,"priv/dc1.pem"}]}]},
          {global_host,"example.com"},
          {local_host,"datacenter1.example.com"},
          {redis,[{pool,global_distrib}]}]},
     {mod_register,
         [{access,all},
          {password_strength,32},
          {registration_watchers,[<<"JID1">>,<<"JID2">>]},
          {welcome_message,{"Subject","Body"}}]},
     {mod_mam_rdbms_async_pool_writer,[pm]},
     {mod_adhoc,[{iqdisc,one_queue},{report_commands_node,true}]},
     {mod_event_pusher_sns,
         [{access_key_id,"AKIAIOSFODNN7EXAMPLE"},
          {account_id,"123456789012"},
          {muc_messages_topic,"user_messagegroup_sent"},
          {plugin_module,mod_event_pusher_sns_defaults},
          {pm_messages_topic,"user_message_sent"},
          {pool_size,100},
          {presence_updates_topic,"user_presence_updated"},
          {publish_retry_count,2},
          {publish_retry_time_ms,50},
          {region,"eu-west-1"},
          {secret_access_key,"wJalrXUtnFEMI/K7MDENG/bPxRfiCYEXAMPLEKEY"},
          {sns_host,"sns.eu-west-1.amazonaws.com"}]},
     {mod_muc,
         [{access,muc},
          {access_create,muc_create},
          {default_room_options,
              [{affiliations,
                   [{{<<"alice">>,<<"localhost">>,<<"resource1">>},member},
                    {{<<"bob">>,<<"localhost">>,<<"resource2">>},owner}]},
               {password_protected,true}]},
          {host,{fqdn,<<"muc.example.com">>}},
          {http_auth_pool,my_auth_pool}]},
     {mod_ping,
         [{ping_interval,60},
          {ping_req_timeout,32},
          {send_pings,true},
          {timeout_action,none}]},
     {mod_hacker_news,
         [{topstories_url,"https://hacker-news.firebaseio.com/v0/topstories.json?print=pretty"},
          {topstories_total,50},
          {topstories_interval,300000},
          {topstories_retry,10}]},
     {mod_mam,
         [{archive_chat_markers,true},
          {full_text_search,false},
          {is_archivable_message,mod_mam_utils},
          {no_stanzaid_element,true}]},
     {mod_disco,
         [{extra_domains,[<<"some_domain">>,<<"another_domain">>]},
          {iqdisc,one_queue},
          {server_info,
              [{all,"abuse-address",["admin@example.com"]},
               {[mod_muc,mod_disco],
                "friendly-spirits",
                ["spirit1@localhost","spirit2@localhost"]}]},
          {users_can_see_hidden_services,true}]},
     {mod_event_pusher_http,
         [{configs,
              [[{callback_module,mod_event_pusher_http_defaults},
                {path,"/notifications"},
                {pool_name,http_pool}]]}]},
     {mod_event_pusher_hook_translator,[]},
     {mod_mam_mnesia_prefs,[muc]},
     {mod_mam_muc,
         [{archive_chat_markers,true},
          {full_text_search,true},
          {host,{fqdn,<<"muc.example.com">>}},
          {is_archivable_message,mod_mam_utils}]},
     {mod_event_pusher_rabbit,
         [{chat_msg_exchange,
              [{name,<<"chat_msg">>},
               {recv_topic,<<"chat_msg_recv">>},
               {sent_topic,<<"chat_msg_sent">>}]},
          {groupchat_msg_exchange,
              [{name,<<"groupchat_msg">>},
               {recv_topic,<<"groupchat_msg_recv">>},
               {sent_topic,<<"groupchat_msg_sent">>}]},
          {presence_exchange,[{name,<<"presence">>},{type,<<"topic">>}]}]},
     {mod_vcard,
         [{host,{fqdn,<<"directory.example.com">>}},
          {ldap_search_fields,
              [{<<"User">>,<<"%u">>},{<<"Full Name">>,<<"displayName">>}]},
          {ldap_search_reported,
              [{<<"Full Name">>,<<"FN">>},{<<"Given Name">>,<<"FIRST">>}]},
          {ldap_vcard_map,
              [{<<"FAMILY">>,<<"%s">>,[<<"sn">>]},
               {<<"FN">>,<<"%s">>,[<<"displayName">>]}]},
          {matches,1},
          {search,true}]},
     {mod_keystore,
         [{keys,
              [{access_secret,ram},
               {access_psk,{file,"priv/access_psk"}},
               {provision_psk,{file,"priv/provision_psk"}}]},
          {ram_key_size,1000}]},
     {mod_mam_rdbms_arch,[no_writer,pm]},
     {mod_bosh,
         [{inactivity,20},
          {maxpause,120},
          {max_wait,infinity},
          {server_acks,true}]},
     {mod_push_service_mongoosepush,
         [{api_version,"v3"},
          {max_http_connections,100},
          {pool_name,mongoose_push_http}]},
     {mod_auth_token,
         [{{validity_period,access},{13,minutes}},
          {{validity_period,refresh},{13,days}}]},
     {mod_extdisco,
         [[{host,"stun1"},
           {password,"password"},
           {port,3478},
           {transport,"udp"},
           {type,stun},
           {username,"username"}],
          [{host,"stun2"},
           {password,"password"},
           {port,2222},
           {transport,"tcp"},
           {type,stun},
           {username,"username"}],
          [{host,"192.168.0.1"},{type,turn}]]},
     {mod_mam_cache_user,[muc,pm]},
     {mod_roster,[{store_current_id,true},{versioning,true}]},
     {mod_http_upload,
         [{backend,s3},
          {expiration_time,120},
          {host,{prefix,<<"upload.">>}},
          {s3,[{access_key_id,"AKIAIOSFODNN7EXAMPLE"},
               {add_acl,true},
               {bucket_url,"https://s3-eu-west-1.amazonaws.com/mybucket"},
               {region,"eu-west-1"},
               {secret_access_key,
                   "wJalrXUtnFEMI/K7MDENG/bPxRfiCYEXAMPLEKEY"}]}]},
     {mod_last,[{backend,mnesia},{iqdisc,{queues,10}}]},
     {mod_offline,
         [{access_max_user_messages,max_user_offline_messages},
          {backend,riak},
          {bucket_type,<<"offline">>}]},
     {mod_mam_muc_rdbms_arch,
         [muc,
          {db_jid_format,mam_jid_rfc},
          {db_message_format,mam_message_xml}]},
     {mod_csi,[{buffer_max,40}]},
     {mod_caps,[{cache_life_time,86},{cache_size,1000}]},
     {mod_pubsub,
         [{access_createnode,pubsub_createnode},
          {backend,rdbms},
          {ignore_pep_from_offline,false},
          {last_item_cache,mnesia},
          {max_items_node,1000},
          {pep_mapping,[{<<"urn:xmpp:microblog:0">>,<<"mb">>}]},
          {plugins,[<<"flat">>,<<"pep">>]}]},
     {mod_mam_rdbms_prefs,[pm]},
     {mod_mam_meta,
         [{archive_chat_markers,true},
          {backend,rdbms},
          {full_text_search,true},
          {is_archivable_message,mod_mam_utils},
          {muc,
              [{async_writer,false},
               {host,{fqdn,<<"muc.example.com">>}},
               {rdbms_message_format,simple},
               {user_prefs_store,mnesia}]},
          {no_stanzaid_element,true},
          {pm,[{full_text_search,false},{user_prefs_store,rdbms}]}]},
     {mod_muc_light,
         [{rooms_per_user,10},
          {rooms_per_page,5},
          {rooms_in_rosters,true},
          {max_occupants,50},
          {legacy_mode,true},
          {host,{fqdn,<<"muclight.example.com">>}},
          {equal_occupants,true},
          {config_schema,
              [{"roomname",<<"The Room">>,roomname,binary},
               {"display-lines",30,display_lines,integer}]},
          {blocking,false},
          {all_can_invite,true},
          {all_can_configure,true}]},
     {mod_stream_management,
         [{ack_freq,1},
          {buffer_max,30},
          {resume_timeout,600},
          {stale_h,
              [{enabled,true},
               {stale_h_geriatric,3600},
               {stale_h_repeat_after,1800}]}]},
     {mod_muc_log,
         [{access_log,muc},
          {cssfile,<<"path/to/css/file">>},
          {outdir,"www/muc"},
          {top_link,{"/","Home"}}]},
     {mod_inbox,
         [{aff_changes,true},
          {groupchat,[muclight]},
          {remove_on_kicked,true},
          {reset_markers,[displayed]}]},
     {mod_event_pusher_push,
         [{backend,mnesia},
          {plugin_module,mod_event_pusher_push_plugin_defaults},
          {virtual_pubsub_hosts,[{fqdn,<<"host1">>},{fqdn,<<"host2">>}]},
          {wpool,[{workers,200}]}]},
     {mod_event_pusher,
         [{backends,
              [{http,
                   [{callback_module,mod_event_pusher_http_defaults},
                    {path,"/notifications"},
                    {pool_name,http_pool}]},
               {push,
                   [{backend,mnesia},
                    {plugin_module,mod_event_pusher_push_plugin_defaults},
                    {virtual_pubsub_hosts,
                        [{fqdn,<<"host1">>},{fqdn,<<"host2">>}]},
                    {wpool,[{workers,200}]}]},
               {rabbit,
                   [{chat_msg_exchange,
                        [{name,<<"chat_msg">>},
                         {recv_topic,<<"chat_msg_recv">>},
                         {sent_topic,<<"chat_msg_sent">>}]},
                    {groupchat_msg_exchange,
                        [{name,<<"groupchat_msg">>},
                         {recv_topic,<<"groupchat_msg_recv">>},
                         {sent_topic,<<"groupchat_msg_sent">>}]},
                    {presence_exchange,
                        [{name,<<"presence">>},{type,<<"topic">>}]}]},
               {sns,
                   [{access_key_id,"AKIAIOSFODNN7EXAMPLE"},
                    {account_id,"123456789012"},
                    {muc_messages_topic,"user_messagegroup_sent"},
                    {plugin_module,mod_event_pusher_sns_defaults},
                    {pm_messages_topic,"user_message_sent"},
                    {pool_size,100},
                    {presence_updates_topic,"user_presence_updated"},
                    {publish_retry_count,2},
                    {publish_retry_time_ms,50},
                    {region,"eu-west-1"},
                    {secret_access_key,
                        "wJalrXUtnFEMI/K7MDENG/bPxRfiCYEXAMPLEKEY"},
                    {sns_host,"sns.eu-west-1.amazonaws.com"}]}]}]},
     {mod_carboncopy,[{iqdisc,no_queue}]},
     {mod_version,[{os_info,true}]}]}.
{local_config,
    {modules,<<"localhost">>},
    [{mod_jingle_sip,
         [{listen_port,5600},
          {local_host,"localhost"},
          {proxy_host,"localhost"},
          {proxy_port,5600},
          {sdp_origin,"127.0.0.1"}]},
     {mod_shared_roster_ldap,
         [{ldap_base,"ou=Users,dc=ejd,dc=com"},
          {ldap_filter,"(objectClass=inetOrgPerson)"},
          {ldap_group_cache_validity,1},
          {ldap_groupattr,"ou"},
          {ldap_memberattr,"cn"},
          {ldap_rfilter,"(objectClass=inetOrgPerson)"},
          {ldap_user_cache_validity,1},
          {ldap_userdesc,"cn"}]},
     {mod_mam_rdbms_user,[muc,pm]},
     {mod_global_distrib,
         [{bounce,[{max_retries,3},{resend_after_ms,300}]},
          {cache,[{domain_lifetime_seconds,60}]},
          {connections,
              [{advertised_endpoints,[{"172.16.0.2",5555}]},
               {connections_per_endpoint,30},
               {endpoints,[{"172.16.0.2",5555}]},
               {tls_opts,[{cafile,"priv/ca.pem"},{certfile,"priv/dc1.pem"}]}]},
          {global_host,"example.com"},
          {local_host,"datacenter1.example.com"},
          {redis,[{pool,global_distrib}]}]},
     {mod_register,
         [{access,all},
          {password_strength,32},
          {registration_watchers,[<<"JID1">>,<<"JID2">>]},
          {welcome_message,{"Subject","Body"}}]},
     {mod_mam_rdbms_async_pool_writer,[pm]},
     {mod_adhoc,[{iqdisc,one_queue},{report_commands_node,true}]},
     {mod_event_pusher_sns,
         [{access_key_id,"AKIAIOSFODNN7EXAMPLE"},
          {account_id,"123456789012"},
          {muc_messages_topic,"user_messagegroup_sent"},
          {plugin_module,mod_event_pusher_sns_defaults},
          {pm_messages_topic,"user_message_sent"},
          {pool_size,100},
          {presence_updates_topic,"user_presence_updated"},
          {publish_retry_count,2},
          {publish_retry_time_ms,50},
          {region,"eu-west-1"},
          {secret_access_key,"wJalrXUtnFEMI/K7MDENG/bPxRfiCYEXAMPLEKEY"},
          {sns_host,"sns.eu-west-1.amazonaws.com"}]},
     {mod_muc,
         [{access,muc},
          {access_create,muc_create},
          {default_room_options,
              [{affiliations,
                   [{{<<"alice">>,<<"localhost">>,<<"resource1">>},member},
                    {{<<"bob">>,<<"localhost">>,<<"resource2">>},owner}]},
               {password_protected,true}]},
          {host,{fqdn,<<"muc.example.com">>}},
          {http_auth_pool,my_auth_pool}]},
     {mod_ping,
         [{ping_interval,60},
          {ping_req_timeout,32},
          {send_pings,true},
          {timeout_action,none}]},
     {mod_hacker_news,
         [{topstories_url,"https://hacker-news.firebaseio.com/v0/topstories.json?print=pretty"},
          {topstories_total,50},
          {topstories_interval,300000},
          {topstories_retry,10}]},
     {mod_mam,
         [{archive_chat_markers,true},
          {full_text_search,false},
          {is_archivable_message,mod_mam_utils},
          {no_stanzaid_element,true}]},
     {mod_disco,
         [{extra_domains,[<<"some_domain">>,<<"another_domain">>]},
          {iqdisc,one_queue},
          {server_info,
              [{all,"abuse-address",["admin@example.com"]},
               {[mod_muc,mod_disco],
                "friendly-spirits",
                ["spirit1@localhost","spirit2@localhost"]}]},
          {users_can_see_hidden_services,true}]},
     {mod_event_pusher_http,
         [{configs,
              [[{callback_module,mod_event_pusher_http_defaults},
                {path,"/notifications"},
                {pool_name,http_pool}]]}]},
     {mod_event_pusher_hook_translator,[]},
     {mod_mam_mnesia_prefs,[muc]},
     {mod_mam_muc,
         [{archive_chat_markers,true},
          {full_text_search,true},
          {host,{fqdn,<<"muc.example.com">>}},
          {is_archivable_message,mod_mam_utils}]},
     {mod_event_pusher_rabbit,
         [{chat_msg_exchange,
              [{name,<<"chat_msg">>},
               {recv_topic,<<"chat_msg_recv">>},
               {sent_topic,<<"chat_msg_sent">>}]},
          {groupchat_msg_exchange,
              [{name,<<"groupchat_msg">>},
               {recv_topic,<<"groupchat_msg_recv">>},
               {sent_topic,<<"groupchat_msg_sent">>}]},
          {presence_exchange,[{name,<<"presence">>},{type,<<"topic">>}]}]},
     {mod_vcard,
         [{host,{fqdn,<<"directory.example.com">>}},
          {ldap_search_fields,
              [{<<"User">>,<<"%u">>},{<<"Full Name">>,<<"displayName">>}]},
          {ldap_search_reported,
              [{<<"Full Name">>,<<"FN">>},{<<"Given Name">>,<<"FIRST">>}]},
          {ldap_vcard_map,
              [{<<"FAMILY">>,<<"%s">>,[<<"sn">>]},
               {<<"FN">>,<<"%s">>,[<<"displayName">>]}]},
          {matches,1},
          {search,true}]},
     {mod_keystore,
         [{keys,
              [{access_secret,ram},
               {access_psk,{file,"priv/access_psk"}},
               {provision_psk,{file,"priv/provision_psk"}}]},
          {ram_key_size,1000}]},
     {mod_mam_rdbms_arch,[no_writer,pm]},
     {mod_bosh,
         [{inactivity,20},
          {maxpause,120},
          {max_wait,infinity},
          {server_acks,true}]},
     {mod_push_service_mongoosepush,
         [{api_version,"v3"},
          {max_http_connections,100},
          {pool_name,mongoose_push_http}]},
     {mod_auth_token,
         [{{validity_period,access},{13,minutes}},
          {{validity_period,refresh},{13,days}}]},
     {mod_extdisco,
         [[{host,"stun1"},
           {password,"password"},
           {port,3478},
           {transport,"udp"},
           {type,stun},
           {username,"username"}],
          [{host,"stun2"},
           {password,"password"},
           {port,2222},
           {transport,"tcp"},
           {type,stun},
           {username,"username"}],
          [{host,"192.168.0.1"},{type,turn}]]},
     {mod_mam_cache_user,[muc,pm]},
     {mod_roster,[{store_current_id,true},{versioning,true}]},
     {mod_http_upload,
         [{backend,s3},
          {expiration_time,120},
          {host,{prefix,<<"upload.">>}},
          {s3,[{access_key_id,"AKIAIOSFODNN7EXAMPLE"},
               {add_acl,true},
               {bucket_url,"https://s3-eu-west-1.amazonaws.com/mybucket"},
               {region,"eu-west-1"},
               {secret_access_key,
                   "wJalrXUtnFEMI/K7MDENG/bPxRfiCYEXAMPLEKEY"}]}]},
     {mod_last,[{backend,mnesia},{iqdisc,{queues,10}}]},
     {mod_offline,
         [{access_max_user_messages,max_user_offline_messages},
          {backend,riak},
          {bucket_type,<<"offline">>}]},
     {mod_mam_muc_rdbms_arch,
         [muc,
          {db_jid_format,mam_jid_rfc},
          {db_message_format,mam_message_xml}]},
     {mod_csi,[{buffer_max,40}]},
     {mod_caps,[{cache_life_time,86},{cache_size,1000}]},
     {mod_pubsub,
         [{access_createnode,pubsub_createnode},
          {backend,rdbms},
          {ignore_pep_from_offline,false},
          {last_item_cache,mnesia},
          {max_items_node,1000},
          {pep_mapping,[{<<"urn:xmpp:microblog:0">>,<<"mb">>}]},
          {plugins,[<<"flat">>,<<"pep">>]}]},
     {mod_mam_rdbms_prefs,[pm]},
     {mod_mam_meta,
         [{archive_chat_markers,true},
          {backend,rdbms},
          {full_text_search,true},
          {is_archivable_message,mod_mam_utils},
          {muc,
              [{async_writer,false},
               {host,{fqdn,<<"muc.example.com">>}},
               {rdbms_message_format,simple},
               {user_prefs_store,mnesia}]},
          {no_stanzaid_element,true},
          {pm,[{full_text_search,false},{user_prefs_store,rdbms}]}]},
     {mod_muc_light,
         [{rooms_per_user,10},
          {rooms_per_page,5},
          {rooms_in_rosters,true},
          {max_occupants,50},
          {legacy_mode,true},
          {host,{fqdn,<<"muclight.example.com">>}},
          {equal_occupants,true},
          {config_schema,
              [{"roomname",<<"The Room">>,roomname,binary},
               {"display-lines",30,display_lines,integer}]},
          {blocking,false},
          {all_can_invite,true},
          {all_can_configure,true}]},
     {mod_stream_management,
         [{ack_freq,1},
          {buffer_max,30},
          {resume_timeout,600},
          {stale_h,
              [{enabled,true},
               {stale_h_geriatric,3600},
               {stale_h_repeat_after,1800}]}]},
     {mod_muc_log,
         [{access_log,muc},
          {cssfile,<<"path/to/css/file">>},
          {outdir,"www/muc"},
          {top_link,{"/","Home"}}]},
     {mod_inbox,
         [{aff_changes,true},
          {groupchat,[muclight]},
          {remove_on_kicked,true},
          {reset_markers,[displayed]}]},
     {mod_event_pusher_push,
         [{backend,mnesia},
          {plugin_module,mod_event_pusher_push_plugin_defaults},
          {virtual_pubsub_hosts,[{fqdn,<<"host1">>},{fqdn,<<"host2">>}]},
          {wpool,[{workers,200}]}]},
     {mod_event_pusher,
         [{backends,
              [{http,
                   [{callback_module,mod_event_pusher_http_defaults},
                    {path,"/notifications"},
                    {pool_name,http_pool}]},
               {push,
                   [{backend,mnesia},
                    {plugin_module,mod_event_pusher_push_plugin_defaults},
                    {virtual_pubsub_hosts,
                        [{fqdn,<<"host1">>},{fqdn,<<"host2">>}]},
                    {wpool,[{workers,200}]}]},
               {rabbit,
                   [{chat_msg_exchange,
                        [{name,<<"chat_msg">>},
                         {recv_topic,<<"chat_msg_recv">>},
                         {sent_topic,<<"chat_msg_sent">>}]},
                    {groupchat_msg_exchange,
                        [{name,<<"groupchat_msg">>},
                         {recv_topic,<<"groupchat_msg_recv">>},
                         {sent_topic,<<"groupchat_msg_sent">>}]},
                    {presence_exchange,
                        [{name,<<"presence">>},{type,<<"topic">>}]}]},
               {sns,
                   [{access_key_id,"AKIAIOSFODNN7EXAMPLE"},
                    {account_id,"123456789012"},
                    {muc_messages_topic,"user_messagegroup_sent"},
                    {plugin_module,mod_event_pusher_sns_defaults},
                    {pm_messages_topic,"user_message_sent"},
                    {pool_size,100},
                    {presence_updates_topic,"user_presence_updated"},
                    {publish_retry_count,2},
                    {publish_retry_time_ms,50},
                    {region,"eu-west-1"},
                    {secret_access_key,
                        "wJalrXUtnFEMI/K7MDENG/bPxRfiCYEXAMPLEKEY"},
                    {sns_host,"sns.eu-west-1.amazonaws.com"}]}]}]},
     {mod_carboncopy,[{iqdisc,no_queue}]},
     {mod_version,[{os_info,true}]}]}.
